# æ¸¸æˆé¡¹ç›® UI é—®é¢˜ä¿®å¤è®¡åˆ’

## ğŸ” å½“å‰é—®é¢˜åˆ†æ

### ä¸»è¦é—®é¢˜

1. **UI å®Œå…¨ä¸æ˜¾ç¤º**
   - åªçœ‹åˆ°å‡ ä¸ªæŒ‰é’®ï¼Œæ²¡æœ‰å¸ƒå±€
   - NPC å¡ç‰‡ã€æ—¥å¿—åŒºåŸŸéƒ½æ²¡æœ‰æ˜¾ç¤º
   - æ–‡æœ¬æ¡†ä¹Ÿä¸å¯è§

2. **æŒ‰é’®æ— å“åº”**
   - ä¿¡å·è¿æ¥å¤±è´¥
   - Godot çš„ `Callable.From()` å¯èƒ½å¤„ç†æœ‰è¯¯

3. **æ ¹æœ¬åŸå› **
   - UIManager åœ¨ä»£ç ä¸­åŠ¨æ€åˆ›å»ºæ‰€æœ‰ UIï¼ˆåæ¨¡å¼ï¼‰
   - Godot æ¨èåœ¨ç¼–è¾‘å™¨ä¸­åˆ›å»º UI åœºæ™¯
   - ä»£ç åŠ¨æ€åˆ›å»ºçš„æ§ä»¶å¸ƒå±€ç®¡ç†ä¸æ­£ç¡®

---

## ğŸ› ï¸ ä¿®å¤æ–¹æ¡ˆ

### Phase 1ï¼šé‡å»º UI ç»“æ„ï¼ˆä½¿ç”¨åœºæ™¯æ–‡ä»¶ï¼‰

**ç›®æ ‡**ï¼šåœ¨ Godot ç¼–è¾‘å™¨ä¸­æ‰‹åŠ¨åˆ›å»º UIï¼Œè€Œä¸æ˜¯ä»£ç ç”Ÿæˆ

**æ­¥éª¤**ï¼š
1. åˆ›å»ºæ–°çš„ Main.tscn å®Œæ•´åœºæ™¯
2. æ‰‹åŠ¨æ·»åŠ æ‰€æœ‰æ§ä»¶èŠ‚ç‚¹
3. è®¾ç½®æ­£ç¡®çš„å¸ƒå±€å‚æ•°
4. ä¿å­˜ä¸ºæ ‡å‡† Godot åœºæ™¯

**é¢„æœŸç»“æ„**ï¼š
```
Main (Node)
â”œâ”€â”€ GameManager (Node) - è„šæœ¬ï¼šGameManager.cs
â””â”€â”€ UIManager (Control) - è„šæœ¬ï¼šUIManager.cs
    â””â”€â”€ HBoxContainer (ä¸»å®¹å™¨)
        â”œâ”€â”€ VBoxContainer (å·¦ä¾§è¾¹æ )
        â”‚   â”œâ”€â”€ DayLabel
        â”‚   â”œâ”€â”€ SuppliesLabel
        â”‚   â”œâ”€â”€ DefenseLabel
        â”‚   â”œâ”€â”€ HSeparator
        â”‚   â”œâ”€â”€ Label ("å¹¸å­˜è€…åˆ—è¡¨")
        â”‚   â””â”€â”€ ScrollContainer
        â”‚       â””â”€â”€ SurvivorCardsContainer (VBoxContainer)
        â”‚
        â””â”€â”€ VBoxContainer (å³ä¾§ä¸»åŒºåŸŸ)
            â”œâ”€â”€ EventLog (RichTextLabel)
            â”œâ”€â”€ HSeparator
            â””â”€â”€ VBoxContainer (è¡ŒåŠ¨åŒº)
                â”œâ”€â”€ NextDayButton
                â”œâ”€â”€ MeetingButton
                â”œâ”€â”€ Label ("è¾“å…¥ä½ çš„å‘½ä»¤")
                â”œâ”€â”€ PlayerInput (LineEdit)
                â”œâ”€â”€ HSeparator
                â””â”€â”€ ChoicesContainer (HBoxContainer)
```

### Phase 2ï¼šé‡å†™ UIManager.cs

**ç›®æ ‡**ï¼šæ”¹ä¸ºä»åœºæ™¯èŠ‚ç‚¹è·å–å¼•ç”¨ï¼Œè€Œä¸æ˜¯ä»£ç åˆ›å»º

**æ”¹å˜**ï¼š
```csharp
// æ—§æ–¹å¼ï¼ˆåˆ é™¤ï¼‰
private void SetupUI()
{
    var mainContainer = new HBoxContainer();
    // ... åˆ›å»ºæ‰€æœ‰æ§ä»¶
}

// æ–°æ–¹å¼ï¼ˆä¿ç•™ï¼‰
public override void _Ready()
{
    // ä»åœºæ™¯è·å–æ‰€æœ‰èŠ‚ç‚¹å¼•ç”¨
    _dayLabel = GetNode<Label>("path/to/DayLabel");
    _eventLog = GetNode<RichTextLabel>("path/to/EventLog");
    // ...
}
```

### Phase 3ï¼šä¿®å¤ä¿¡å·è¿æ¥

**ç›®æ ‡**ï¼šç¡®ä¿ GameManager æ­£ç¡®è¿æ¥ UIManager çš„ä¿¡å·

**æ”¹è¿›æ–¹å¼**ï¼š
```csharp
// ä½¿ç”¨æ›´å®‰å…¨çš„è¿æ¥æ–¹æ³•
_uiManager.Connect(UIManager.SignalName.NextDayPressed, 
    Callable.From(this, MethodName.OnNextDayPressed));
```

### Phase 4ï¼šéªŒè¯å’Œæµ‹è¯•

**æ£€æŸ¥æ¸…å•**ï¼š
- [ ] Main.tscn åœ¨ç¼–è¾‘å™¨ä¸­æ˜¾ç¤ºæ­£ç¡®çš„ UI å¸ƒå±€
- [ ] æ‰€æœ‰æ§ä»¶éƒ½å¯è§ä¸”å°ºå¯¸æ­£ç¡®
- [ ] UIManager._Ready() æˆåŠŸè·å–æ‰€æœ‰èŠ‚ç‚¹å¼•ç”¨
- [ ] GameManager æˆåŠŸè¿æ¥ä¿¡å·
- [ ] ç‚¹å‡»æŒ‰é’®æ—¶æœ‰ååº”
- [ ] NPC å¡ç‰‡æ­£ç¡®æ˜¾ç¤º

---

## ğŸ“Š å®æ–½é¡ºåº

1. **æ‰‹åŠ¨åˆ›å»º Main.tscn**ï¼ˆ~10 åˆ†é’Ÿï¼‰
   - ä½¿ç”¨ Godot ç¼–è¾‘å™¨æ‹–æ”¾åˆ›å»º
   - è®¾ç½®å¸ƒå±€å’Œçº¦æŸ

2. **é‡å†™ UIManager**ï¼ˆ~15 åˆ†é’Ÿï¼‰
   - åˆ é™¤ SetupUI()
   - æ·»åŠ  GetNode<>() è°ƒç”¨
   - ä¿ç•™æ‰€æœ‰æ›´æ–°é€»è¾‘

3. **æµ‹è¯•ä¿¡å·è¿æ¥**ï¼ˆ~5 åˆ†é’Ÿï¼‰
   - éªŒè¯æŒ‰é’®ç‚¹å‡»
   - æ£€æŸ¥æ§åˆ¶å°è¾“å‡º

4. **å®Œæ•´æµ‹è¯•**ï¼ˆ~10 åˆ†é’Ÿï¼‰
   - è¿è¡Œæ¸¸æˆ
   - ç‚¹å‡»æ‰€æœ‰æŒ‰é’®
   - æ£€æŸ¥ NPC æ˜¾ç¤º

---

## ğŸ“ˆ é¢„æœŸæ•ˆæœ

ä¿®å¤åä½ åº”è¯¥çœ‹åˆ°ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Masquerade Ark                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å·¦ä¾§è¾¹æ          â”‚  å³ä¾§ä¸»åŒºåŸŸ          â”‚
â”‚                  â”‚                      â”‚
â”‚ Day 1            â”‚ äº‹ä»¶æ—¥å¿—ï¼š           â”‚
â”‚ Supplies: 50     â”‚ æ¬¢è¿æ¥åˆ°...          â”‚
â”‚ Defense: 50      â”‚                      â”‚
â”‚                  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚ å¹¸å­˜è€…åˆ—è¡¨       â”‚ [æ¨è¿›ä¸‹ä¸€å¤©]         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ [å¬å¼€ä¼šè®®]           â”‚
â”‚ â”‚Dr. Sarah     â”‚ â”‚                      â”‚
â”‚ â”‚HP: â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ â”‚ â”‚ [help________]       â”‚
â”‚ â”‚Stress: â–‘â–‘â–‘â–‘â–‘ â”‚ â”‚                      â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                      â”‚
â”‚                  â”‚                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                      â”‚
â”‚ â”‚Jake          â”‚ â”‚                      â”‚
â”‚ â”‚HP: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â”‚ â”‚                      â”‚
â”‚ â”‚Stress: â–‘â–‘â–‘â–‘â–‘ â”‚ â”‚                      â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                      â”‚
â”‚                  â”‚                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… å…³é”®æ”¹è¿›ç‚¹

| é—®é¢˜ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|------|--------|
| UI ä¸æ˜¾ç¤º | ä»£ç ç”Ÿæˆçš„æ§ä»¶å¸ƒå±€ä¸æ­£ç¡® | ä½¿ç”¨ç¼–è¾‘å™¨åœºæ™¯åˆ›å»º |
| NPC ä¸æ˜¾ç¤º | VBoxContainer æ²¡æœ‰æ­£ç¡®å±•å¼€ | æ‰‹åŠ¨è®¾ç½® SizeFlagsVertical |
| æŒ‰é’®æ— å“åº” | ä¿¡å·è¿æ¥æ–¹å¼æœ‰è¯¯ | ä½¿ç”¨ MethodName æ­£ç¡®è¿æ¥ |
| æ–‡å­—çœ‹ä¸æ¸… | å­—ä½“å¤§å°å¯èƒ½å¤ªå° | ç¼–è¾‘å™¨ä¸­è®¾ç½®å­—ä½“ |

---

## ğŸš€ æŠ€æœ¯è¦ç‚¹

### Godot åœºæ™¯æ–‡ä»¶æœ€ä½³å®è·µ

1. **UI åº”è¯¥åœ¨ç¼–è¾‘å™¨ä¸­åˆ›å»º**
   - å¯è§†åŒ–è®¾è®¡
   - å®æ—¶é¢„è§ˆ
   - æ›´å®¹æ˜“ç»´æŠ¤

2. **ä»£ç åº”è¯¥åªå¤„ç†é€»è¾‘**
   - æ•°æ®ç»‘å®š
   - äº‹ä»¶å¤„ç†
   - æ¸¸æˆè§„åˆ™

3. **C# ä¸ Godot äº’æ“ä½œ**
   - ä½¿ç”¨ `GetNode<>()` è·å–èŠ‚ç‚¹
   - ä½¿ç”¨ `Callable.From(this, MethodName.Method)` è¿æ¥ä¿¡å·
   - é¿å…åŠ¨æ€ UI åˆ›å»º

---

## ğŸ“ é¢„æœŸä»£ç å˜åŒ–

### UIManager.cs ç®€åŒ–

```csharp
public override void _Ready()
{
    // ä»åœºæ™¯æ ‘è·å–æ‰€æœ‰èŠ‚ç‚¹å¼•ç”¨
    _dayLabel = GetNode<Label>("HBoxContainer/Sidebar/DayLabel");
    _suppliesLabel = GetNode<Label>("HBoxContainer/Sidebar/SuppliesLabel");
    _eventLog = GetNode<RichTextLabel>("HBoxContainer/MainArea/EventLog");
    _nextDayButton = GetNode<Button>("HBoxContainer/MainArea/ActionArea/NextDayButton");
    // ... å…¶ä»–èŠ‚ç‚¹
    
    // è¿æ¥æŒ‰é’®ä¿¡å·
    _nextDayButton.Pressed += OnNextDayPressed;
    // ...
}

// åˆ é™¤æ•´ä¸ª SetupUI() æ–¹æ³•
```

### GameManager.cs æ”¹è¿›

```csharp
private void ConnectUISignals()
{
    if (_uiManager == null)
        return;
    
    // ä½¿ç”¨ MethodName ç¡®ä¿ç±»å‹å®‰å…¨
    _uiManager.Connect(
        UIManager.SignalName.NextDayPressed,
        Callable.From(this, MethodName.OnNextDayPressed)
    );
}
```

---

**æ€»ä¼°è®¡æ—¶é—´**ï¼š40 åˆ†é’Ÿ
**ä¼˜å…ˆçº§**ï¼šé«˜ï¼ˆé˜»å¡æ‰€æœ‰ UI åŠŸèƒ½ï¼‰
**éš¾åº¦**ï¼šä¸­ç­‰ï¼ˆä¸»è¦æ˜¯ç¼–è¾‘å™¨æ“ä½œï¼‰
